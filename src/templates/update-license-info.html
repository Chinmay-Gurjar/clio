{% extends "base.html" %}
<!-- 
    Copyright (C) 2018 Gopalakrishnan

    SPDX-License-Identifier: GPL-3.0-or-later
    See GPL-3.0-or-later in the Licenses folder for license information
-->

{% block content %}
<style>
.ui.main.container {
    margin-top: 50px !important;
}
.ui.dividing.header {
    margin-top: 30px !important;
    margin-bottom: 30px !important;
}
</style>
<script>
$(document).ready(function() {
    $('.ui.radio.checkbox').checkbox();
    $('.ui.form')
	.form({
	    fields: {
		full_name  : 'empty',
		identifier : 'empty',
	    }
	})
    ;
});
</script>
<div class="ui main container">
    {% with errors = get_flashed_messages(category_filter=['error']) %}
    {% if(errors) %}
    <div class="ui error message">
	<div class="header">
	    There where some errors with your submission
	</div>
	<ul>
	    {% for error in errors %}
	    <li> {{ error }} </li>
	    {% endfor %}
	</ul>
    </div>
    {% endif %}
    {% endwith %}
    {% with success_messages = get_flashed_messages(category_filter=['success']) %}
    {% if(success_messages) %}
    {% for success_message in success_messages %}
    <div class="ui success message">
	<div class="header">
	    {{ success_message }} 
	</div>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    <form class="ui equal width form" action={{ url_for("update_license_info", id=license.id) }} method="post">
	<h4 class="ui dividing header">Update License : <a href={{ url_for("license_info", id=license.id) }}>#{{ license.id }}</a> </h4>
	<div class="fields">
	    <div class="required field">
		<label>Full Name</label>
		<input type="text" name="full_name" placeholder="Full Name" value="{{ license.full_name }}">
	    </div>
	    <div class="required field">
		<label>Identifier</label>
		<input type="text" name="identifier" placeholder="Identifier" value="{{ license.identifier }}">
	    </div>
	    <div class="field">
		<label>License Category</label>
		<input type="text" name="license_category" placeholder="Category" value="{{ license.license_category }}">
	    </div>
	</div>
	<br />
	<div class="ui grid">
	    <div class="eight wide column">
		<div class="grouped fields">
		    <label>FSF Free/Libre ?</label>
		    <div class="field">
			<div class="ui radio checkbox">
			    <input type="radio" name="fsf_free_libre" value="true" {{ "checked=checked" if license.fsf_free_libre == true }}>
			    <label>True</label>
			</div>
		    </div>
		    <div class="field">
			<div class="ui radio checkbox">
			    <input type="radio" name="fsf_free_libre" value="false" {{ "checked=checked" if license.fsf_free_libre == false }}>
			    <label>False</label>
			</div>
		    </div>
		</div>
	    </div>
	    <div class="eight wide column">
		<div class="grouped fields">
		    <label>OSI Approved ?</label>
		    <div class="field">
			<div class="ui radio checkbox">
			    <input type="radio" name="osi_approved" value="true" {{ "checked=checked" if license.osi_approved == true }}>
			    <label>True</label>
			</div>
		    </div>
		    <div class="field">
			<div class="ui radio checkbox">
			    <input type="radio" name="osi_approved" value="false" {{ "checked=checked" if license.osi_approved == false }}>
			    <label>False</label>
			</div>
		    </div>
		</div>
	    </div>
	</div>
	<br />
	<div class="field">
	    <label>License Text</label>
	    <textarea name="license_text">{{ license.license_text }}</textarea>
	</div>
	<button class="ui primary button" type="submit">Save</button>
    </form>
</div>
{% endblock %}
